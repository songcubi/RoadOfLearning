# 本博客搭建过程

## 框架

-  [docsify](https://docsify.js.org/#/zh-cn/?id=docsify)是一个文档网站生成器。

- docsify 可以快速帮你生成文档网站。不同于 GitBook、Hexo 的地方是它不会生成静态的 `.html` 文件，所有转换工作都是在运行时。如果你想要开始使用它，只需要创建一个 `index.html` 就可以开始编写文档并直接[部署在 GitHub Pages](https://docsify.js.org/#/zh-cn/deploy)。

  

## 安装docsify

推荐全局安装 `docsify-cli` 工具，可以方便地创建及在本地预览生成的文档。

```bash
npm i docsify-cli -g
```



## 初始化项目

如果想在项目的 `./docs` 目录里写文档，直接通过 `init` 初始化项目。

```bash
docsify init ./docs
```



## 运行项目

```bash
docsify serve docs
```





## 配置index.html文件

根据官网配置index.html。

- 下面是我的**index.html**

```html
<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>Document</title>
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<meta name="description" content="Description">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">


		<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/docsify@4/lib/themes/vue.css">
		<!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsify-themeable@0/dist/css/theme-defaults.css"> -->

		<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk/dist/gitalk.css">

		<!-- 这个插件用来在 Markdown 中显示选项卡。 -->
		<style>
			:root {
				--docsifytabs-border-color: #ededed;
				--docsifytabs-tab-highlight-color: purple;
			}
		</style>

	</head>
	<body>
		<div id="app">
			喝茶🍵中，请稍后！
		</div>
		<script>
			window.$docsify = {

				name: 'songcubi',
				repo: 'https://github.com/songcubi',
				basePath: "https://cdn.jsdelivr.net/gh/songcubi/RoadOfLearning@gh-pages/",
				loadSidebar: true,
				auto2top: true,
				// subMaxLevel: 2,
				coverpage: true,
				alias: {
					"/.*/_sidebar.md": "/_sidebar.md"
				},
				themeColor: '#5457b6',
				mergeNavbar: true,
				count: {
					position: "bottom",
				},

				tabs: {
					persist: true, // default
					sync: true, // default
					theme: 'classic', // default
					tabComments: true, // default
					tabHeadings: true // default
				},



				plugins: [
					function(hook) {
						var footer = [
							'<hr/>',
							'<footer>',
							'<span><a href="https://github.com/songcubi" target="_blank">Songcubi</a></span>',
							'<span>愿生活更美好</span>',
							'</footer>'
						].join('');

						hook.afterEach(function(html) {
							return html + footer;
						});
					}
				],


				search: {
					depth: 1,
					noData: 'No Results!',
					paths: 'auto',
					placeholder: 'search🔎',
				},

				pagination: {
					previousText: '上一章',
					nextText: '下一章',
					crossChapter: true,
					crossChapterText: true,
				},

			}
		</script>
		<!-- Docsify v4 -->
		<script src="//cdn.jsdelivr.net/npm/docsify@4"></script>

		<script src="//cdn.jsdelivr.net/npm/docsify/lib/plugins/emoji.min.js"></script>

		<script src="//cdn.jsdelivr.net/npm/docsify/lib/plugins/zoom-image.min.js"></script>

		<script src="//cdn.jsdelivr.net/npm/docsify-copy-code/dist/docsify-copy-code.min.js"></script>




		<!-- docsify-tabs (latest v1.x.x) -->
		<script src="https://cdn.jsdelivr.net/npm/docsify-tabs@1"></script>

		<!-- 代码高亮 -->
		<script src="//cdn.jsdelivr.net/npm/prismjs@1/components/prism-bash.min.js"></script>
		<script src="//cdn.jsdelivr.net/npm/prismjs@1/components/prism-php.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/components/prism-json.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/components/prism-java.js"></script>

		<script src="https://cdn.jsdelivr.net/npm/docsify-sidebar-fold/dist/sidebar.js"></script>

		<!-- 全文搜索 - Search -->
		<script src="//cdn.jsdelivr.net/npm/docsify/lib/plugins/search.min.js"></script>

		<script src="https://cdn.jsdelivr.net/npm/docsify-count/dist/countable.js"></script>


		<script src="//unpkg.com/docsify-pagination/dist/docsify-pagination.min.js"></script>

		<script src="https://cdn.jsdelivr.net/npm/docsify-catalog/dist/catalog.js"></script>


		<script src="//cdn.jsdelivr.net/npm/docsify/lib/plugins/gitalk.min.js"></script>
		<script src="//cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.js"></script>
		<script>
			const gitalk = new Gitalk({
				id: location.pathname,
				clientID: '530bac71b78c99f3ca8a',
				clientSecret: '57cce06d163ca2447b0238d9828267ed1b953043',
				repo: 'RoadOfLearning',
				owner: 'songcubi',
				admin: ['songcubi'],
				title: location.hash.match(/#(.*?)([?]|$)/)[1],
				id: location.hash.match(/#(.*?)([?]|$)/)[1]
			})
			// 监听URL中hash的变化，如果发现换了一个MD文件，那么刷新页面，解决整个网站使用一个gitalk评论issues的问题。
			window.onhashchange = function(event){
			      if(event.newURL.split('?')[0] !== event.oldURL .split('?')[0]) {
			        location.reload()
			      }
			    }
		</script>


	</body>
</html>
```





## 配置_coverpage.md封面文件

根据官网配置_coverpage.md。

```markdown
<!-- _coverpage.md -->
# Songcubi <small>书生白夜行</small>

> The Road Of Learning

- 把握时间，莫虚度光阴
- 本人愚钝，奈何不服输
- 前端曲路，需早取真经
- 生肖：🐇

[![star](https://img.shields.io/badge/StartTime-2021.6.8-red.svg "Author")](https://github.com/songcubi)

[GitHub🚁](https://github.com/docsifyjs/docsify/)
[Get Started🚀](#docsify)
```





## 配置_sidebar.md侧边栏文件

根据官网配置_sidebar.md。

```markdown
* Java
	* [Java复习](java/java复习.md)
	* [SpringMVC](java/SpringMVC.md)

* Browser
	* [浏览器](browser/深入了解浏览器.md) 
	
* CSS

* Html

* JavaScript


```







## 部署到GitHub page

上面已经把我们想要的文档样式做好了，那么下一步我们就需要将项目放到我们在GitHub上面新建的仓库里面。

>### 新建仓库

- 登陆GitHub账户，新建一个自己想取名字的仓库。

> ### 上传项目

- 我用的是svn工具上传项目

> ### 仓库设置

- 在仓库的设置里面打开github page功能，并且配置好相应的项目路径。
- 我是把项目放到了gh-page分支里面，所以设置对应的路径。



## 完成

点击page设置界面提供的链接，就可以进入到我们的文档网站，到此部署完成。





## 站点访问加速

>### jsdelivr

- **jsDelivr** 是一个免费、开源的加速CDN公共服务，托管了许多大大小小的项目，可加速访问托管的项目目录或图片资源。如果你想加载github某个仓库中的某张图片，可以通过jsDelivr来访问加载的。另外打开仓库目录，使用jsDelivr打开目录， 打开的目录页面也是简单实用的；
- 在我的index.html文件里面的js和css引入都是通过jsDelivr链接使用，加快了资源加载速度。



>### cloudflare

- 一般没有挂```v屁n```的话，想访问我们的文档是很难的，基本进不去。。。所以我们可以花几块钱购买一个域名，绑定到我们的github page站点上，再通过**cloudflare**绑定域名。这样子我们就可以做到在国内快速的访问到文档站点。



## 注意

当想要在_sidebar.md文件添加路径的时候，想要本地测试看效果，要把index.html文件的```basePath: "https://cdn.jsdelivr.net/gh/songcubi/RoadOfLearning@gh-pages/",```这行代码注释，否则效果不会出来。
